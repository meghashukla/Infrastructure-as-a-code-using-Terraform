{
  "version": 4,
  "terraform_version": "0.14.5",
  "serial": 323,
  "lineage": "06b6d31e-ceb1-7f5a-5862-e48fcd185bca",
  "outputs": {
    "instance_id": {
      "value": "i-0ddbdc24d2c5653e7",
      "type": "string"
    },
    "security_group_internal": {
      "value": "internal",
      "type": "string"
    },
    "security_group_internal_id": {
      "value": "sg-004b2509e3b454df1",
      "type": "string"
    },
    "security_group_public": {
      "value": "public",
      "type": "string"
    },
    "security_group_public_id": {
      "value": "sg-0bb6f195393d7eefe",
      "type": "string"
    },
    "subnet_private": {
      "value": "privatesubnet",
      "type": "string"
    },
    "subnet_private_az": {
      "value": [
        "us-east-1b",
        "us-east-1a"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string"
        ]
      ]
    },
    "subnet_private_id": {
      "value": [
        "subnet-07b5baf3b643796b3",
        "subnet-033a28e36960ac7d5"
      ],
      "type": [
        "tuple",
        [
          "string",
          "string"
        ]
      ]
    },
    "subnet_public": {
      "value": "publicsubnet",
      "type": "string"
    },
    "subnet_public_id": {
      "value": [
        [
          "subnet-05e41f579584cf79c",
          "subnet-02456f72a288327c1"
        ]
      ],
      "type": [
        "tuple",
        [
          [
            "tuple",
            [
              "string",
              "string"
            ]
          ]
        ]
      ]
    },
    "vpc": {
      "value": "mastervpc",
      "type": "string"
    },
    "vpc_region": {
      "value": "us-east-1",
      "type": "string"
    }
  },
  "resources": [
    {
      "module": "module.applicationloadbalancer",
      "mode": "managed",
      "type": "aws_lb",
      "name": "applicationloadbalancer",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "access_logs": [
              {
                "bucket": "",
                "enabled": false,
                "prefix": ""
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:loadbalancer/app/masterloadbalancer/1f01ec2de2894c98",
            "arn_suffix": "app/masterloadbalancer/1f01ec2de2894c98",
            "customer_owned_ipv4_pool": "",
            "dns_name": "masterloadbalancer-1167926462.us-east-1.elb.amazonaws.com",
            "drop_invalid_header_fields": false,
            "enable_cross_zone_load_balancing": null,
            "enable_deletion_protection": false,
            "enable_http2": true,
            "id": "arn:aws:elasticloadbalancing:us-east-1:817189533007:loadbalancer/app/masterloadbalancer/1f01ec2de2894c98",
            "idle_timeout": 60,
            "internal": false,
            "ip_address_type": "ipv4",
            "load_balancer_type": "application",
            "name": "masterloadbalancer",
            "name_prefix": null,
            "security_groups": [
              "sg-0bb6f195393d7eefe"
            ],
            "subnet_mapping": [
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-02456f72a288327c1"
              },
              {
                "allocation_id": "",
                "ipv6_address": "",
                "outpost_id": "",
                "private_ipv4_address": "",
                "subnet_id": "subnet-05e41f579584cf79c"
              }
            ],
            "subnets": [
              "subnet-02456f72a288327c1",
              "subnet-05e41f579584cf79c"
            ],
            "tags": null,
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12",
            "zone_id": "Z35SXDOTRQ7X7K"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwLCJ1cGRhdGUiOjYwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.security_groups.aws_security_group.public",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.applicationloadbalancer",
      "mode": "managed",
      "type": "aws_lb_listener",
      "name": "http",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:listener/app/masterloadbalancer/1f01ec2de2894c98/52c7214d4f16f929",
            "certificate_arn": null,
            "default_action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:targetgroup/masterloadbalancer-targetgroup/8c156c00c2ac2485",
                "type": "forward"
              }
            ],
            "id": "arn:aws:elasticloadbalancing:us-east-1:817189533007:listener/app/masterloadbalancer/1f01ec2de2894c98/52c7214d4f16f929",
            "load_balancer_arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:loadbalancer/app/masterloadbalancer/1f01ec2de2894c98",
            "port": 80,
            "protocol": "HTTP",
            "ssl_policy": "",
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsicmVhZCI6NjAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.applicationloadbalancer.aws_lb.applicationloadbalancer",
            "module.applicationloadbalancer.aws_lb_target_group.alb_target_group",
            "module.security_groups.aws_security_group.public",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.applicationloadbalancer",
      "mode": "managed",
      "type": "aws_lb_listener_rule",
      "name": "health_check",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "action": [
              {
                "authenticate_cognito": [],
                "authenticate_oidc": [],
                "fixed_response": [
                  {
                    "content_type": "text/plain",
                    "message_body": "HEALTHY",
                    "status_code": "200"
                  }
                ],
                "forward": [],
                "order": 1,
                "redirect": [],
                "target_group_arn": "",
                "type": "fixed-response"
              }
            ],
            "arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:listener-rule/app/masterloadbalancer/1f01ec2de2894c98/52c7214d4f16f929/3943d3c0e50d3136",
            "condition": [
              {
                "host_header": [],
                "http_header": [],
                "http_request_method": [],
                "path_pattern": [],
                "query_string": [
                  {
                    "key": "",
                    "value": "bar"
                  },
                  {
                    "key": "health",
                    "value": "check"
                  }
                ],
                "source_ip": []
              }
            ],
            "id": "arn:aws:elasticloadbalancing:us-east-1:817189533007:listener-rule/app/masterloadbalancer/1f01ec2de2894c98/52c7214d4f16f929/3943d3c0e50d3136",
            "listener_arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:listener/app/masterloadbalancer/1f01ec2de2894c98/52c7214d4f16f929",
            "priority": 1
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.applicationloadbalancer.aws_lb.applicationloadbalancer",
            "module.applicationloadbalancer.aws_lb_listener.http",
            "module.applicationloadbalancer.aws_lb_target_group.alb_target_group",
            "module.security_groups.aws_security_group.public",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.applicationloadbalancer",
      "mode": "managed",
      "type": "aws_lb_target_group",
      "name": "alb_target_group",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:elasticloadbalancing:us-east-1:817189533007:targetgroup/masterloadbalancer-targetgroup/8c156c00c2ac2485",
            "arn_suffix": "targetgroup/masterloadbalancer-targetgroup/8c156c00c2ac2485",
            "deregistration_delay": 300,
            "health_check": [
              {
                "enabled": true,
                "healthy_threshold": 5,
                "interval": 30,
                "matcher": "200",
                "path": "/",
                "port": "traffic-port",
                "protocol": "HTTP",
                "timeout": 5,
                "unhealthy_threshold": 2
              }
            ],
            "id": "arn:aws:elasticloadbalancing:us-east-1:817189533007:targetgroup/masterloadbalancer-targetgroup/8c156c00c2ac2485",
            "lambda_multi_value_headers_enabled": false,
            "load_balancing_algorithm_type": "round_robin",
            "name": "masterloadbalancer-targetgroup",
            "name_prefix": null,
            "port": 80,
            "protocol": "HTTP",
            "protocol_version": "HTTP1",
            "proxy_protocol_v2": false,
            "slow_start": 0,
            "stickiness": [
              {
                "cookie_duration": 86400,
                "enabled": false,
                "type": "lb_cookie"
              }
            ],
            "tags": null,
            "target_type": "instance",
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.autoscalinggroup",
      "mode": "managed",
      "type": "aws_ami_from_instance",
      "name": "ec2instanceimage",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "architecture": "x86_64",
            "arn": "arn:aws:ec2:us-east-1::image/ami-02aeba34b7eec241c",
            "description": "",
            "ebs_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 0,
                "snapshot_id": "snap-0847e5a33b9a5b25c",
                "throughput": 0,
                "volume_size": 20,
                "volume_type": "gp2"
              }
            ],
            "ena_support": true,
            "ephemeral_block_device": [],
            "hypervisor": "xen",
            "id": "ami-02aeba34b7eec241c",
            "image_location": "817189533007/Masterwebserver-ami6",
            "image_owner_alias": "",
            "image_type": "machine",
            "kernel_id": "",
            "manage_ebs_snapshots": true,
            "name": "Masterwebserver-ami6",
            "owner_id": "817189533007",
            "platform": "",
            "platform_details": "Red Hat Enterprise Linux",
            "public": false,
            "ramdisk_id": "",
            "root_device_name": "/dev/sda1",
            "root_snapshot_id": "snap-0847e5a33b9a5b25c",
            "snapshot_without_reboot": null,
            "source_instance_id": "i-0ddbdc24d2c5653e7",
            "sriov_net_support": "simple",
            "tags": null,
            "timeouts": null,
            "usage_operation": "RunInstances:0010",
            "virtualization_type": "hvm"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoyNDAwMDAwMDAwMDAwLCJkZWxldGUiOjU0MDAwMDAwMDAwMDAsInVwZGF0ZSI6MjQwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.kms.aws_kms_key.masterkey",
            "module.security_groups.aws_security_group.internal",
            "module.subnet_private.aws_subnet.private",
            "module.vpc.aws_vpc.primary_vpc",
            "module.webinstance.aws_instance.web"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.autoscalinggroup",
      "mode": "managed",
      "type": "aws_autoscaling_group",
      "name": "autoscalinggroup",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:us-east-1:817189533007:autoScalingGroup:5ce7959b-37dd-412b-abd1-2edef3806e78:autoScalingGroupName/tf-asg-20210326153755259500000003",
            "availability_zones": [
              "us-east-1a",
              "us-east-1b"
            ],
            "capacity_rebalance": false,
            "default_cooldown": 300,
            "desired_capacity": 1,
            "enabled_metrics": null,
            "force_delete": false,
            "health_check_grace_period": 300,
            "health_check_type": "ELB",
            "id": "tf-asg-20210326153755259500000003",
            "initial_lifecycle_hook": [],
            "instance_refresh": [],
            "launch_configuration": "terraform-20210326153752398300000002",
            "launch_template": [],
            "load_balancers": null,
            "max_instance_lifetime": 0,
            "max_size": 2,
            "metrics_granularity": "1Minute",
            "min_elb_capacity": null,
            "min_size": 1,
            "mixed_instances_policy": [],
            "name": "tf-asg-20210326153755259500000003",
            "name_prefix": null,
            "placement_group": "",
            "protect_from_scale_in": false,
            "service_linked_role_arn": "arn:aws:iam::817189533007:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling",
            "suspended_processes": null,
            "tag": [
              {
                "key": "Name",
                "propagate_at_launch": true,
                "value": "arn:aws:elasticloadbalancing:us-east-1:817189533007:loadbalancer/app/masterloadbalancer/1f01ec2de2894c98-asg"
              }
            ],
            "tags": null,
            "target_group_arns": [
              "arn:aws:elasticloadbalancing:us-east-1:817189533007:targetgroup/masterloadbalancer-targetgroup/8c156c00c2ac2485"
            ],
            "termination_policies": null,
            "timeouts": null,
            "vpc_zone_identifier": [
              "subnet-033a28e36960ac7d5",
              "subnet-07b5baf3b643796b3"
            ],
            "wait_for_capacity_timeout": "10m",
            "wait_for_elb_capacity": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjo2MDAwMDAwMDAwMDB9fQ==",
          "dependencies": [
            "module.applicationloadbalancer.aws_lb.applicationloadbalancer",
            "module.applicationloadbalancer.aws_lb_target_group.alb_target_group",
            "module.autoscalinggroup.aws_ami_from_instance.ec2instanceimage",
            "module.autoscalinggroup.aws_launch_configuration.asglaunchconfiguration",
            "module.kms.aws_kms_key.masterkey",
            "module.security_groups.aws_security_group.internal",
            "module.security_groups.aws_security_group.public",
            "module.subnet_private.aws_subnet.private",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc",
            "module.webinstance.aws_instance.web"
          ]
        }
      ]
    },
    {
      "module": "module.autoscalinggroup",
      "mode": "managed",
      "type": "aws_autoscaling_policy",
      "name": "autoscalinggrouppolicy",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "adjustment_type": "ChangeInCapacity",
            "arn": "arn:aws:autoscaling:us-east-1:817189533007:scalingPolicy:496d36f3-dabe-48dd-adb3-c18ae9326a05:autoScalingGroupName/tf-asg-20210326153755259500000003:policyName/asgpolicy",
            "autoscaling_group_name": "tf-asg-20210326153755259500000003",
            "cooldown": 300,
            "estimated_instance_warmup": 0,
            "id": "asgpolicy",
            "metric_aggregation_type": "",
            "min_adjustment_magnitude": null,
            "name": "asgpolicy",
            "policy_type": "SimpleScaling",
            "scaling_adjustment": 1,
            "step_adjustment": [],
            "target_tracking_configuration": []
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.applicationloadbalancer.aws_lb.applicationloadbalancer",
            "module.applicationloadbalancer.aws_lb_target_group.alb_target_group",
            "module.autoscalinggroup.aws_ami_from_instance.ec2instanceimage",
            "module.autoscalinggroup.aws_autoscaling_group.autoscalinggroup",
            "module.autoscalinggroup.aws_launch_configuration.asglaunchconfiguration",
            "module.kms.aws_kms_key.masterkey",
            "module.security_groups.aws_security_group.internal",
            "module.security_groups.aws_security_group.public",
            "module.subnet_private.aws_subnet.private",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc",
            "module.webinstance.aws_instance.web"
          ]
        }
      ]
    },
    {
      "module": "module.autoscalinggroup",
      "mode": "managed",
      "type": "aws_launch_configuration",
      "name": "asglaunchconfiguration",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:autoscaling:us-east-1:817189533007:launchConfiguration:4c31f1ea-8d81-4b1e-b25a-f14f304c4b59:launchConfigurationName/terraform-20210326153752398300000002",
            "associate_public_ip_address": false,
            "ebs_block_device": [],
            "ebs_optimized": false,
            "enable_monitoring": true,
            "ephemeral_block_device": [],
            "iam_instance_profile": "",
            "id": "terraform-20210326153752398300000002",
            "image_id": "ami-02aeba34b7eec241c",
            "instance_type": "t2.micro",
            "key_name": "newkeypait",
            "metadata_options": [],
            "name": "terraform-20210326153752398300000002",
            "name_prefix": null,
            "placement_tenancy": null,
            "root_block_device": [],
            "security_groups": [
              "sg-004b2509e3b454df1"
            ],
            "spot_price": "",
            "user_data": null,
            "user_data_base64": null,
            "vpc_classic_link_id": "",
            "vpc_classic_link_security_groups": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.autoscalinggroup.aws_ami_from_instance.ec2instanceimage",
            "module.kms.aws_kms_key.masterkey",
            "module.security_groups.aws_security_group.internal",
            "module.subnet_private.aws_subnet.private",
            "module.vpc.aws_vpc.primary_vpc",
            "module.webinstance.aws_instance.web"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.cloudwatchalarms",
      "mode": "managed",
      "type": "aws_cloudwatch_metric_alarm",
      "name": "alarm5XX",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "actions_enabled": true,
            "alarm_actions": [
              "arn:aws:sns:us-east-1:817189533007:sns_alarms_for_http_5XX"
            ],
            "alarm_description": "SNS if we start getting a lot of 500 errors",
            "alarm_name": "Masterwebserver-5XXalarm",
            "arn": "arn:aws:cloudwatch:us-east-1:817189533007:alarm:Masterwebserver-5XXalarm",
            "comparison_operator": "GreaterThanThreshold",
            "datapoints_to_alarm": 0,
            "dimensions": {
              "LoadBalancer": "arn:aws:elasticloadbalancing:us-east-1:817189533007:loadbalancer/app/masterloadbalancer/1f01ec2de2894c98"
            },
            "evaluate_low_sample_count_percentiles": "",
            "evaluation_periods": 1,
            "extended_statistic": "",
            "id": "Masterwebserver-5XXalarm",
            "insufficient_data_actions": null,
            "metric_name": "HTTPCode_ELB_5XX_Count",
            "metric_query": [],
            "namespace": "AWS/ELB",
            "ok_actions": null,
            "period": 60,
            "statistic": "Sum",
            "tags": null,
            "threshold": 200,
            "threshold_metric_id": "",
            "treat_missing_data": "missing",
            "unit": ""
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.applicationloadbalancer.aws_lb.applicationloadbalancer",
            "module.security_groups.aws_security_group.public",
            "module.snstopics.aws_sns_topic.sns_alarms_for_http_5XX",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.ebsvolumes",
      "mode": "managed",
      "type": "aws_ebs_volume",
      "name": "ebsvolume",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:volume/vol-076dfaa35f4bbbfec",
            "availability_zone": "us-east-1a",
            "encrypted": false,
            "id": "vol-076dfaa35f4bbbfec",
            "iops": 150,
            "kms_key_id": "",
            "multi_attach_enabled": false,
            "outpost_arn": "",
            "size": 50,
            "snapshot_id": "",
            "tags": null,
            "throughput": 0,
            "type": "gp2"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.kms",
      "mode": "managed",
      "type": "aws_kms_key",
      "name": "masterkey",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:kms:us-east-1:817189533007:key/da75a8fe-107f-4ed3-a56a-facb264d4e46",
            "customer_master_key_spec": "SYMMETRIC_DEFAULT",
            "deletion_window_in_days": 10,
            "description": "encryption at rest key",
            "enable_key_rotation": false,
            "id": "da75a8fe-107f-4ed3-a56a-facb264d4e46",
            "is_enabled": true,
            "key_id": "da75a8fe-107f-4ed3-a56a-facb264d4e46",
            "key_usage": "ENCRYPT_DECRYPT",
            "policy": "{\"Id\":\"key-consolepolicy-3\",\"Statement\":[{\"Action\":\"kms:*\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"arn:aws:iam::817189533007:user/terraform-user\"},\"Resource\":\"*\",\"Sid\":\"Enable IAM User Permissions\"},{\"Action\":[\"kms:Create*\",\"kms:Describe*\",\"kms:Enable*\",\"kms:List*\",\"kms:Put*\",\"kms:Update*\",\"kms:Revoke*\",\"kms:Disable*\",\"kms:Get*\",\"kms:Delete*\",\"kms:TagResource\",\"kms:UntagResource\",\"kms:ScheduleKeyDeletion\",\"kms:CancelKeyDeletion\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::817189533007:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling\",\"arn:aws:iam::817189533007:role/aws-service-role/globalaccelerator.amazonaws.com/AWSServiceRoleForGlobalAccelerator\",\"arn:aws:iam::817189533007:user/terraform-user\",\"arn:aws:iam::817189533007:role/aws-service-role/elasticloadbalancing.amazonaws.com/AWSServiceRoleForElasticLoadBalancing\"]},\"Resource\":\"*\",\"Sid\":\"Allow access for Key Administrators\"},{\"Action\":[\"kms:Encrypt\",\"kms:Decrypt\",\"kms:ReEncrypt*\",\"kms:GenerateDataKey*\",\"kms:DescribeKey\"],\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::817189533007:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling\",\"arn:aws:iam::817189533007:role/aws-service-role/globalaccelerator.amazonaws.com/AWSServiceRoleForGlobalAccelerator\",\"arn:aws:iam::817189533007:user/terraform-user\",\"arn:aws:iam::817189533007:role/aws-service-role/elasticloadbalancing.amazonaws.com/AWSServiceRoleForElasticLoadBalancing\"]},\"Resource\":\"*\",\"Sid\":\"Allow use of the key\"},{\"Action\":[\"kms:CreateGrant\",\"kms:ListGrants\",\"kms:RevokeGrant\"],\"Condition\":{\"Bool\":{\"kms:GrantIsForAWSResource\":\"true\"}},\"Effect\":\"Allow\",\"Principal\":{\"AWS\":[\"arn:aws:iam::817189533007:role/aws-service-role/autoscaling.amazonaws.com/AWSServiceRoleForAutoScaling\",\"arn:aws:iam::817189533007:role/aws-service-role/globalaccelerator.amazonaws.com/AWSServiceRoleForGlobalAccelerator\",\"arn:aws:iam::817189533007:user/terraform-user\",\"arn:aws:iam::817189533007:role/aws-service-role/elasticloadbalancing.amazonaws.com/AWSServiceRoleForElasticLoadBalancing\"]},\"Resource\":\"*\",\"Sid\":\"Allow attachment of persistent resources\"}],\"Version\":\"2012-10-17\"}",
            "tags": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.security_groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "internal",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:security-group/sg-004b2509e3b454df1",
            "description": "Security group to access private ports",
            "egress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "id": "sg-004b2509e3b454df1",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "internal",
            "name_prefix": "",
            "owner_id": "817189533007",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "internal"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.security_groups",
      "mode": "managed",
      "type": "aws_security_group",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:security-group/sg-0bb6f195393d7eefe",
            "description": "Public access security group",
            "egress": [
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "",
                "from_port": 22,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 22
              },
              {
                "cidr_blocks": [
                  "10.0.0.0/16"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "id": "sg-0bb6f195393d7eefe",
            "ingress": [
              {
                "cidr_blocks": [
                  "0.0.0.0/0"
                ],
                "description": "",
                "from_port": 80,
                "ipv6_cidr_blocks": [],
                "prefix_list_ids": [],
                "protocol": "tcp",
                "security_groups": [],
                "self": false,
                "to_port": 80
              }
            ],
            "name": "public",
            "name_prefix": "",
            "owner_id": "817189533007",
            "revoke_rules_on_delete": false,
            "tags": {
              "Name": "public"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6NjAwMDAwMDAwMDAwfSwic2NoZW1hX3ZlcnNpb24iOiIxIn0=",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.snstopics",
      "mode": "data",
      "type": "template_file",
      "name": "cloudformation_sns_stack",
      "provider": "provider[\"registry.terraform.io/hashicorp/template\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "filename": null,
            "id": "5b1e6737fa3a38dd1f8a4bd7557fcd66d5fafffe8d48c9700f4d72e7b675a478",
            "rendered": "{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Resources\" : {\n    \"EmailSNSTopic\": {\n      \"Type\" : \"AWS::SNS::Topic\",\n      \"Properties\" : {\n        \"DisplayName\" : \"Admin Notifications\",\n        \"Subscription\": [\n          {\n           \"Endpoint\" : \"msmeghashukla@gmail.com\",\n           \"Protocol\" : \"email\"\n          }\n        ]\n      }\n    }\n  },\n\n  \"Outputs\" : {\n    \"ARN\" : {\n      \"Description\" : \"Email SNS Topic ARN\",\n      \"Value\" : { \"Ref\" : \"EmailSNSTopic\" }\n    }\n  }\n}",
            "template": "{\n  \"AWSTemplateFormatVersion\": \"2010-09-09\",\n  \"Resources\" : {\n    \"EmailSNSTopic\": {\n      \"Type\" : \"AWS::SNS::Topic\",\n      \"Properties\" : {\n        \"DisplayName\" : \"${display_name}\",\n        \"Subscription\": [\n          {\n           \"Endpoint\" : \"${email_address}\",\n           \"Protocol\" : \"${protocol}\"\n          }\n        ]\n      }\n    }\n  },\n\n  \"Outputs\" : {\n    \"ARN\" : {\n      \"Description\" : \"Email SNS Topic ARN\",\n      \"Value\" : { \"Ref\" : \"EmailSNSTopic\" }\n    }\n  }\n}",
            "vars": {
              "display_name": "Admin Notifications",
              "email_address": "msmeghashukla@gmail.com",
              "protocol": "email"
            }
          },
          "sensitive_attributes": []
        }
      ]
    },
    {
      "module": "module.snstopics",
      "mode": "managed",
      "type": "aws_cloudformation_stack",
      "name": "sns_topic",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "capabilities": null,
            "disable_rollback": false,
            "iam_role_arn": "",
            "id": "arn:aws:cloudformation:us-east-1:817189533007:stack/mystack/2e0d0700-8e47-11eb-8a29-120346a4bf23",
            "name": "mystack",
            "notification_arns": null,
            "on_failure": null,
            "outputs": {
              "ARN": "arn:aws:sns:us-east-1:817189533007:mystack-EmailSNSTopic-17TJ4X46UDMKL"
            },
            "parameters": {},
            "policy_body": null,
            "policy_url": null,
            "tags": null,
            "template_body": "{\"AWSTemplateFormatVersion\":\"2010-09-09\",\"Outputs\":{\"ARN\":{\"Description\":\"Email SNS Topic ARN\",\"Value\":{\"Ref\":\"EmailSNSTopic\"}}},\"Resources\":{\"EmailSNSTopic\":{\"Properties\":{\"DisplayName\":\"Admin Notifications\",\"Subscription\":[{\"Endpoint\":\"msmeghashukla@gmail.com\",\"Protocol\":\"email\"}]},\"Type\":\"AWS::SNS::Topic\"}}}",
            "template_url": null,
            "timeout_in_minutes": null,
            "timeouts": null
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxODAwMDAwMDAwMDAwLCJkZWxldGUiOjE4MDAwMDAwMDAwMDAsInVwZGF0ZSI6MTgwMDAwMDAwMDAwMH19",
          "dependencies": [
            "module.snstopics.data.template_file.cloudformation_sns_stack"
          ]
        }
      ]
    },
    {
      "module": "module.snstopics",
      "mode": "managed",
      "type": "aws_sns_topic",
      "name": "sns_alarms_for_http_5XX",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "application_failure_feedback_role_arn": "",
            "application_success_feedback_role_arn": "",
            "application_success_feedback_sample_rate": null,
            "arn": "arn:aws:sns:us-east-1:817189533007:sns_alarms_for_http_5XX",
            "delivery_policy": "",
            "display_name": "",
            "http_failure_feedback_role_arn": "",
            "http_success_feedback_role_arn": "",
            "http_success_feedback_sample_rate": null,
            "id": "arn:aws:sns:us-east-1:817189533007:sns_alarms_for_http_5XX",
            "kms_master_key_id": "",
            "lambda_failure_feedback_role_arn": "",
            "lambda_success_feedback_role_arn": "",
            "lambda_success_feedback_sample_rate": null,
            "name": "sns_alarms_for_http_5XX",
            "name_prefix": null,
            "policy": "{\"Version\":\"2008-10-17\",\"Id\":\"__default_policy_ID\",\"Statement\":[{\"Sid\":\"__default_statement_ID\",\"Effect\":\"Allow\",\"Principal\":{\"AWS\":\"*\"},\"Action\":[\"SNS:GetTopicAttributes\",\"SNS:SetTopicAttributes\",\"SNS:AddPermission\",\"SNS:RemovePermission\",\"SNS:DeleteTopic\",\"SNS:Subscribe\",\"SNS:ListSubscriptionsByTopic\",\"SNS:Publish\",\"SNS:Receive\"],\"Resource\":\"arn:aws:sns:us-east-1:817189533007:sns_alarms_for_http_5XX\",\"Condition\":{\"StringEquals\":{\"AWS:SourceOwner\":\"817189533007\"}}}]}",
            "sqs_failure_feedback_role_arn": "",
            "sqs_success_feedback_role_arn": "",
            "sqs_success_feedback_sample_rate": null,
            "tags": null
          },
          "sensitive_attributes": [],
          "private": "bnVsbA=="
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_eip",
      "name": "eip",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": null,
            "associate_with_private_ip": null,
            "association_id": "",
            "carrier_ip": "",
            "customer_owned_ip": "",
            "customer_owned_ipv4_pool": "",
            "domain": "vpc",
            "id": "eipalloc-071661259aeb674fa",
            "instance": "",
            "network_border_group": "us-east-1",
            "network_interface": "",
            "private_dns": null,
            "private_ip": "",
            "public_dns": "ec2-54-83-70-173.compute-1.amazonaws.com",
            "public_ip": "54.83.70.173",
            "public_ipv4_pool": "amazon",
            "tags": null,
            "timeouts": null,
            "vpc": true
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiZGVsZXRlIjoxODAwMDAwMDAwMDAsInJlYWQiOjkwMDAwMDAwMDAwMCwidXBkYXRlIjozMDAwMDAwMDAwMDB9fQ=="
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_nat_gateway",
      "name": "masterngw",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "allocation_id": "eipalloc-071661259aeb674fa",
            "id": "nat-0bea95204cf7d856c",
            "network_interface_id": "eni-0248637906f19a96d",
            "private_ip": "10.0.1.137",
            "public_ip": "54.83.70.173",
            "subnet_id": "subnet-05e41f579584cf79c",
            "tags": {
              "Name": "ngw-privatesubnet"
            }
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.subnet_private.aws_eip.eip",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_route",
      "name": "nat_gateway_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "",
            "id": "r-rtb-05eed1077602b6bcb1080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "nat-0bea95204cf7d856c",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "route_table_id": "rtb-05eed1077602b6bcb",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": null,
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.subnet_private.aws_eip.eip",
            "module.subnet_private.aws_nat_gateway.masterngw",
            "module.subnet_private.aws_route_table.private_route_table",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "private_route_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rtb-05eed1077602b6bcb",
            "owner_id": "817189533007",
            "propagating_vgws": [],
            "route": [],
            "tags": {
              "Name": "privatesubnet-rt"
            },
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "rt_assn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-064f974e327f23051",
            "route_table_id": "rtb-05eed1077602b6bcb",
            "subnet_id": "subnet-07b5baf3b643796b3"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.subnet_private.aws_route_table.private_route_table",
            "module.subnet_private.aws_subnet.private",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-02b1f6efb24d277df",
            "route_table_id": "rtb-05eed1077602b6bcb",
            "subnet_id": "subnet-033a28e36960ac7d5"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.subnet_private.aws_route_table.private_route_table",
            "module.subnet_private.aws_subnet.private",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_private",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "private",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:subnet/subnet-07b5baf3b643796b3",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "10.0.128.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-07b5baf3b643796b3",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "817189533007",
            "tags": {
              "Name": "privatesubnet 1"
            },
            "tags_all": {
              "Name": "privatesubnet 1"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ],
          "create_before_destroy": true
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:subnet/subnet-033a28e36960ac7d5",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.0.129.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-033a28e36960ac7d5",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "817189533007",
            "tags": {
              "Name": "privatesubnet 2"
            },
            "tags_all": {
              "Name": "privatesubnet 2"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.subnet_public",
      "mode": "managed",
      "type": "aws_internet_gateway",
      "name": "internet_gateway",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:internet-gateway/igw-0f81792067c642c33",
            "id": "igw-0f81792067c642c33",
            "owner_id": "817189533007",
            "tags": {
              "Name": "igw-publicsubnet"
            },
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_public",
      "mode": "managed",
      "type": "aws_route",
      "name": "gateway_route",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "destination_cidr_block": "0.0.0.0/0",
            "destination_ipv6_cidr_block": "",
            "destination_prefix_list_id": "",
            "egress_only_gateway_id": "",
            "gateway_id": "igw-0f81792067c642c33",
            "id": "r-rtb-03eb03c69954f4f761080289494",
            "instance_id": "",
            "instance_owner_id": "",
            "local_gateway_id": "",
            "nat_gateway_id": "",
            "network_interface_id": "",
            "origin": "CreateRoute",
            "route_table_id": "rtb-03eb03c69954f4f76",
            "state": "active",
            "timeouts": null,
            "transit_gateway_id": "",
            "vpc_endpoint_id": null,
            "vpc_peering_connection_id": ""
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjoxMjAwMDAwMDAwMDAsImRlbGV0ZSI6MzAwMDAwMDAwMDAwfX0=",
          "dependencies": [
            "module.subnet_public.aws_internet_gateway.internet_gateway",
            "module.subnet_public.aws_route_table.public_route_table",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_public",
      "mode": "managed",
      "type": "aws_route_table",
      "name": "public_route_table",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 0,
          "attributes": {
            "id": "rtb-03eb03c69954f4f76",
            "owner_id": "817189533007",
            "propagating_vgws": [],
            "route": [],
            "tags": {
              "Name": "rt-publicsubnet"
            },
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_public",
      "mode": "managed",
      "type": "aws_route_table_association",
      "name": "rt_assn",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-0386b4d4f7f9ee7e8",
            "route_table_id": "rtb-03eb03c69954f4f76",
            "subnet_id": "subnet-05e41f579584cf79c"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.subnet_public.aws_route_table.public_route_table",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 0,
          "attributes": {
            "gateway_id": null,
            "id": "rtbassoc-02c044795e3fe41fa",
            "route_table_id": "rtb-03eb03c69954f4f76",
            "subnet_id": "subnet-02456f72a288327c1"
          },
          "sensitive_attributes": [],
          "private": "bnVsbA==",
          "dependencies": [
            "module.subnet_public.aws_route_table.public_route_table",
            "module.subnet_public.aws_subnet.public",
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.subnet_public",
      "mode": "managed",
      "type": "aws_subnet",
      "name": "public",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "index_key": 0,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:subnet/subnet-05e41f579584cf79c",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1a",
            "availability_zone_id": "use1-az1",
            "cidr_block": "10.0.1.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-05e41f579584cf79c",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "817189533007",
            "tags": {
              "Name": "publicsubnet 1"
            },
            "tags_all": {
              "Name": "publicsubnet 1"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        },
        {
          "index_key": 1,
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:subnet/subnet-02456f72a288327c1",
            "assign_ipv6_address_on_creation": false,
            "availability_zone": "us-east-1b",
            "availability_zone_id": "use1-az2",
            "cidr_block": "10.0.2.0/24",
            "customer_owned_ipv4_pool": "",
            "id": "subnet-02456f72a288327c1",
            "ipv6_cidr_block": "",
            "ipv6_cidr_block_association_id": "",
            "map_customer_owned_ip_on_launch": false,
            "map_public_ip_on_launch": false,
            "outpost_arn": "",
            "owner_id": "817189533007",
            "tags": {
              "Name": "publicsubnet 2"
            },
            "tags_all": {
              "Name": "publicsubnet 2"
            },
            "timeouts": null,
            "vpc_id": "vpc-0e38ada39b89def12"
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMH0sInNjaGVtYV92ZXJzaW9uIjoiMSJ9",
          "dependencies": [
            "module.vpc.aws_vpc.primary_vpc"
          ]
        }
      ]
    },
    {
      "module": "module.vpc",
      "mode": "managed",
      "type": "aws_vpc",
      "name": "primary_vpc",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "arn": "arn:aws:ec2:us-east-1:817189533007:vpc/vpc-0e38ada39b89def12",
            "assign_generated_ipv6_cidr_block": false,
            "cidr_block": "10.0.0.0/16",
            "default_network_acl_id": "acl-0a9da3ddf8d9f4943",
            "default_route_table_id": "rtb-03a8eaf1b6d2ff7c4",
            "default_security_group_id": "sg-01ed31f1ad624d2a0",
            "dhcp_options_id": "dopt-96287eec",
            "enable_classiclink": false,
            "enable_classiclink_dns_support": false,
            "enable_dns_hostnames": false,
            "enable_dns_support": true,
            "id": "vpc-0e38ada39b89def12",
            "instance_tenancy": "default",
            "ipv6_association_id": "",
            "ipv6_cidr_block": "",
            "main_route_table_id": "rtb-03a8eaf1b6d2ff7c4",
            "owner_id": "817189533007",
            "tags": {
              "Name": "mastervpc"
            },
            "tags_all": {
              "Name": "mastervpc"
            }
          },
          "sensitive_attributes": [],
          "private": "eyJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "create_before_destroy": true
        }
      ]
    },
    {
      "module": "module.webinstance",
      "mode": "managed",
      "type": "aws_instance",
      "name": "web",
      "provider": "provider[\"registry.terraform.io/hashicorp/aws\"]",
      "instances": [
        {
          "schema_version": 1,
          "attributes": {
            "ami": "ami-096fda3c22c1c990a",
            "arn": "arn:aws:ec2:us-east-1:817189533007:instance/i-0ddbdc24d2c5653e7",
            "associate_public_ip_address": false,
            "availability_zone": "us-east-1a",
            "cpu_core_count": 1,
            "cpu_threads_per_core": 1,
            "credit_specification": [
              {
                "cpu_credits": "standard"
              }
            ],
            "disable_api_termination": false,
            "ebs_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:817189533007:key/da75a8fe-107f-4ed3-a56a-facb264d4e46",
                "snapshot_id": "snap-03f2e24f30f580353",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-05d2a4e01654c4c0d",
                "volume_size": 20,
                "volume_type": "gp2"
              }
            ],
            "ebs_optimized": false,
            "enclave_options": [
              {
                "enabled": false
              }
            ],
            "ephemeral_block_device": [],
            "get_password_data": false,
            "hibernation": false,
            "host_id": null,
            "iam_instance_profile": "",
            "id": "i-0ddbdc24d2c5653e7",
            "instance_initiated_shutdown_behavior": null,
            "instance_state": "running",
            "instance_type": "t2.micro",
            "ipv6_address_count": 0,
            "ipv6_addresses": [],
            "key_name": "newkeypait",
            "metadata_options": [
              {
                "http_endpoint": "enabled",
                "http_put_response_hop_limit": 1,
                "http_tokens": "optional"
              }
            ],
            "monitoring": false,
            "network_interface": [],
            "outpost_arn": "",
            "password_data": "",
            "placement_group": "",
            "primary_network_interface_id": "eni-0334488225f76420e",
            "private_dns": "ip-10-0-129-157.ec2.internal",
            "private_ip": "10.0.129.157",
            "public_dns": "",
            "public_ip": "",
            "root_block_device": [
              {
                "delete_on_termination": true,
                "device_name": "/dev/sda1",
                "encrypted": true,
                "iops": 100,
                "kms_key_id": "arn:aws:kms:us-east-1:817189533007:key/da75a8fe-107f-4ed3-a56a-facb264d4e46",
                "tags": {},
                "throughput": 0,
                "volume_id": "vol-05d2a4e01654c4c0d",
                "volume_size": 20,
                "volume_type": "gp2"
              }
            ],
            "secondary_private_ips": [],
            "security_groups": [],
            "source_dest_check": true,
            "subnet_id": "subnet-033a28e36960ac7d5",
            "tags": {
              "Name": "Masterwebserver"
            },
            "tenancy": "default",
            "timeouts": null,
            "user_data": "d23b93e4266e400f69be1a38e0661b30fd58cc28",
            "user_data_base64": null,
            "volume_tags": null,
            "vpc_security_group_ids": [
              "sg-004b2509e3b454df1"
            ]
          },
          "sensitive_attributes": [],
          "private": "eyJlMmJmYjczMC1lY2FhLTExZTYtOGY4OC0zNDM2M2JjN2M0YzAiOnsiY3JlYXRlIjo2MDAwMDAwMDAwMDAsImRlbGV0ZSI6MTIwMDAwMDAwMDAwMCwidXBkYXRlIjo2MDAwMDAwMDAwMDB9LCJzY2hlbWFfdmVyc2lvbiI6IjEifQ==",
          "dependencies": [
            "module.kms.aws_kms_key.masterkey",
            "module.security_groups.aws_security_group.internal",
            "module.subnet_private.aws_subnet.private",
            "module.vpc.aws_vpc.primary_vpc"
          ],
          "create_before_destroy": true
        }
      ]
    }
  ]
}
